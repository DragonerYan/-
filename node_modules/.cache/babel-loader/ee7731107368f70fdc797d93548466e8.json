{"remainingRequest":"D:\\github007\\vue2-element-touzi-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\github007\\vue2-element-touzi-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\github007\\vue2-element-touzi-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\github007\\vue2-element-touzi-admin\\src\\page\\fundList\\fundList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\github007\\vue2-element-touzi-admin\\src\\page\\fundList\\fundList.vue","mtime":1604132537163},{"path":"D:\\github007\\vue2-element-touzi-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github007\\vue2-element-touzi-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\github007\\vue2-element-touzi-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github007\\vue2-element-touzi-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.search\";\nimport _defineProperty from \"D:\\\\github007\\\\vue2-element-touzi-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport * as mutils from '@/utils/mUtils';\nimport SearchItem from \"./components/searchItem\";\nimport AddFundDialog from \"./components/addFundDialog\";\nimport Pagination from \"@/components/pagination\";\nimport { getMoneyIncomePay, removeMoney, batchremoveMoney } from \"@/api/money\";\nexport default {\n  data: function data() {\n    return {\n      tableData: [],\n      tableHeight: 0,\n      loading: true,\n      idFlag: false,\n      isShow: false,\n      // 是否显示资金modal,默认为false\n      editid: '',\n      rowIds: [],\n      sortnum: 0,\n      format_type_list: {\n        0: '提现',\n        1: '提现手续费',\n        2: '提现锁定',\n        3: '理财服务退出',\n        4: '购买宜定盈',\n        5: '充值',\n        6: '优惠券',\n        7: '充值礼券',\n        8: '转账'\n      },\n      addFundDialog: {\n        show: false,\n        dialogRow: {}\n      },\n      incomePayData: {\n        page: 1,\n        limit: 20,\n        name: ''\n      },\n      pageTotal: 0,\n      // 用于列表筛选\n      fields: {\n        incomePayType: {\n          filter: {\n            list: [{\n              text: '提现',\n              value: 0\n            }, {\n              text: '提现手续费',\n              value: 1\n            }, {\n              text: '提现锁定',\n              value: 2\n            }, {\n              text: '理财服务退出',\n              value: 3\n            }, {\n              text: '购买宜定盈',\n              value: 4\n            }, {\n              text: '充值',\n              value: 5\n            }, {\n              text: '优惠券',\n              value: 6\n            }, {\n              text: '充值礼券',\n              value: 7\n            }, {\n              text: '转账',\n              value: 8\n            }],\n            multiple: true\n          }\n        }\n      }\n    };\n  },\n  components: {\n    SearchItem: SearchItem,\n    AddFundDialog: AddFundDialog,\n    Pagination: Pagination\n  },\n  computed: _objectSpread({}, mapGetters(['search'])),\n  mounted: function mounted() {\n    this.getMoneyList();\n  },\n  methods: {\n    setAddress: function setAddress(value) {},\n    setTableHeight: function setTableHeight() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.tableHeight = document.body.clientHeight - 300;\n      });\n    },\n    // 获取资金列表数据\n    getMoneyList: function getMoneyList() {\n      var _this2 = this;\n\n      var para = Object.assign({}, this.incomePayData, this.search);\n      getMoneyIncomePay(para).then(function (res) {\n        _this2.loading = false;\n        _this2.pageTotal = res.data.total;\n        _this2.tableData = res.data.moneyList;\n      });\n    },\n    // 显示资金弹框\n    showAddFundDialog: function showAddFundDialog(val) {\n      this.$store.commit('SET_DIALOG_TITLE', val);\n      this.addFundDialog.show = true;\n    },\n    hideAddFundDialog: function hideAddFundDialog() {\n      this.addFundDialog.show = false;\n    },\n    // 上下分页\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.incomePayData.page = val;\n      this.getMoneyList();\n    },\n    // 每页显示多少条\n    handleSizeChange: function handleSizeChange(val) {\n      this.incomePayData.limit = val;\n      this.getMoneyList();\n    },\n    getPay: function getPay(val) {\n      if (mutils.isInteger(val)) {\n        return -val;\n      } else {\n        return val;\n      }\n    },\n\n    /**\n    * 格式化状态\n    */\n    formatterType: function formatterType(item) {\n      var type = parseInt(item.incomePayType);\n      return this.format_type_list[type];\n    },\n    filterType: function filterType(value, item) {\n      var type = parseInt(item.incomePayType);\n      return this.format_type_list[value] == this.format_type_list[type];\n    },\n    // 编辑操作方法\n    onEditMoney: function onEditMoney(row) {\n      this.addFundDialog.dialogRow = _objectSpread({}, row);\n      this.showAddFundDialog();\n    },\n    // 删除数据\n    onDeleteMoney: function onDeleteMoney(row) {\n      var _this3 = this;\n\n      this.$confirm('确认删除该记录吗?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        var para = {\n          id: row.id\n        };\n        removeMoney(para).then(function (res) {\n          _this3.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n\n          _this3.getMoneyList();\n        });\n      }).catch(function () {});\n    },\n    onBatchDelMoney: function onBatchDelMoney() {\n      var _this4 = this;\n\n      this.$confirm('确认批量删除记录吗?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        var ids = _this4.rowIds.map(function (item) {\n          return item.id;\n        }).toString();\n\n        var para = {\n          ids: ids\n        };\n        batchremoveMoney(para).then(function (res) {\n          _this4.$message({\n            message: '批量删除成功',\n            type: 'success'\n          });\n\n          _this4.getMoneyList();\n        });\n      }).catch(function () {});\n    },\n    // 当用户手动勾选数据行的 Checkbox 时触发的事件\n    selectTable: function selectTable(val, row) {\n      this.setSearchBtn(val);\n    },\n    // 用户全选checkbox时触发该事件\n    selectAll: function selectAll(val) {\n      var _this5 = this;\n\n      val.forEach(function (item) {\n        _this5.rowIds.push(item.id);\n      });\n      this.setSearchBtn(val);\n    },\n    setSearchBtn: function setSearchBtn(val) {\n      var isFlag = true;\n\n      if (val.length > 0) {\n        isFlag = false;\n      } else {\n        isFlag = true;\n      }\n\n      this.$store.commit('SET_SEARCHBTN_DISABLED', isFlag);\n    }\n  }\n};",{"version":3,"sources":["fundList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"fillcontain\">\r\n        <search-item @showDialog=\"showAddFundDialog\" @searchList=\"getMoneyList\" @onBatchDelMoney=\"onBatchDelMoney\"></search-item>\r\n        <div class=\"table_container\">\r\n            <el-table\r\n                v-loading=\"loading\"\r\n                :data=\"tableData\"\r\n                style=\"width: 100%\"\r\n                align='center'\r\n                @select=\"selectTable\"\r\n                @select-all=\"selectAll\"\r\n                >\r\n              <el-table-column\r\n                v-if=\"idFlag\"\r\n                prop=\"id\"\r\n                label=\"id\"\r\n                align='center'\r\n                width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                type=\"selection\"\r\n                align='center'\r\n                width=\"60\">\r\n            </el-table-column>\r\n              <el-table-column\r\n                prop=\"username\"\r\n                label=\"用户姓名\"\r\n                align='center'\r\n                width=\"80\">\r\n            </el-table-column>\r\n              <el-table-column\r\n                v-if=\"idFlag\"\r\n                prop=\"address\"\r\n                label=\"籍贯\"\r\n                align='center'\r\n                >\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"address\"\r\n                label=\"籍贯\"\r\n                align='center'\r\n                >\r\n                 <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#00d053\">+ {{ scope.row.tableAddress || scope.row.address }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"createTime\"\r\n                label=\"投资时间\"\r\n                align='center'\r\n                sortable\r\n                width=\"170\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-icon name=\"time\"></el-icon>\r\n                    <span style=\"margin-left: 10px\">{{ scope.row.createTime }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"incomePayType\"\r\n                label=\"收支类型\"\r\n                align='center'\r\n                width=\"130\"\r\n                :formatter=\"formatterType\"\r\n                :filters=\"fields.incomePayType.filter.list\"\r\n                :filter-method=\"filterType\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"income\"\r\n                label=\"收入\"\r\n                align='center'\r\n                width=\"130\"\r\n                sortable> \r\n                <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#00d053\">+ {{ scope.row.income }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"pay\"\r\n                label=\"支出\"\r\n                align='center'\r\n                width=\"130\"\r\n                sortable>\r\n                <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#f56767\">{{ scope.row.pay }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"accoutCash\"\r\n                label=\"账户现金\"\r\n                align='center'\r\n                width=\"130\"\r\n                sortable>\r\n                <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#4db3ff\">{{ scope.row.accoutCash }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"operation\"\r\n                align='center'\r\n                label=\"操作\"\r\n                width=\"180\">\r\n                <template slot-scope='scope'>\r\n                    <el-button \r\n                        type=\"warning\" \r\n                        icon='edit' \r\n                        size=\"mini\"\r\n                        @click='onEditMoney(scope.row)'\r\n                    >编辑</el-button>\r\n                    <el-button \r\n                        type=\"danger\" \r\n                        icon='delete' \r\n                        size=\"mini\"\r\n                        @click='onDeleteMoney(scope.row,scope.$index)'\r\n                    >删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n            </el-table>\r\n            <pagination :pageTotal=\"pageTotal\" @handleCurrentChange=\"handleCurrentChange\" @handleSizeChange=\"handleSizeChange\"></pagination>\r\n            <addFundDialog  v-if=\"addFundDialog.show\" :isShow=\"addFundDialog.show\" :dialogRow=\"addFundDialog.dialogRow\"  @getFundList=\"getMoneyList\"  @closeDialog=\"hideAddFundDialog\"></addFundDialog>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { mapGetters } from \"vuex\";\r\n    import * as mutils from '@/utils/mUtils'\r\n    import SearchItem from \"./components/searchItem\";\r\n    import AddFundDialog from \"./components/addFundDialog\";\r\n    import Pagination from \"@/components/pagination\";\r\n    import { getMoneyIncomePay , removeMoney, batchremoveMoney } from \"@/api/money\";\r\n\r\n    export default {\r\n        data(){\r\n            return {\r\n                tableData: [],\r\n                tableHeight:0,\r\n                loading:true,\r\n                idFlag:false,\r\n                isShow:false, // 是否显示资金modal,默认为false\r\n                editid:'',\r\n                rowIds:[],\r\n                sortnum:0,\r\n                format_type_list: {\r\n                    0: '提现',\r\n                    1: '提现手续费',\r\n                    2: '提现锁定',\r\n                    3: '理财服务退出',\r\n                    4: '购买宜定盈',\r\n                    5: '充值',\r\n                    6: '优惠券',\r\n                    7: '充值礼券',\r\n                    8: '转账'\r\n                },\r\n                addFundDialog:{  \r\n                    show:false,\r\n                    dialogRow:{}\r\n                },\r\n                incomePayData:{\r\n                    page:1,\r\n                    limit:20,\r\n                    name:''\r\n                },\r\n                pageTotal:0,\r\n                // 用于列表筛选\r\n                fields: {\r\n                    incomePayType:{\r\n                        filter: {\r\n                            list: [{\r\n                                text: '提现',\r\n                                value: 0\r\n                            },{\r\n                                text: '提现手续费',\r\n                                value: 1\r\n                            }, {\r\n                                text: '提现锁定',\r\n                                value: 2\r\n                            }, {\r\n                                text: '理财服务退出',\r\n                                value: 3\r\n                            }, {\r\n                                text: '购买宜定盈',\r\n                                value: 4\r\n                            }, {\r\n                                text: '充值',\r\n                                value: 5\r\n                            }, {\r\n                                text: '优惠券',\r\n                                value: 6\r\n                            }, {\r\n                                text: '充值礼券',\r\n                                value: 7\r\n                            }, {\r\n                                text: '转账',\r\n                                value: 8\r\n                            }],\r\n                            multiple: true\r\n                        }\r\n                    },\r\n                },\r\n               \r\n            }\r\n        },\r\n        components:{\r\n            SearchItem,\r\n            AddFundDialog,\r\n            Pagination\r\n        },\r\n        computed:{\r\n            ...mapGetters(['search'])\r\n        },\r\n      \tmounted() {\r\n            this.getMoneyList();\r\n\t   },\r\n        methods: {\r\n            setAddress(value){\r\n\r\n            },\r\n            setTableHeight(){\r\n                this.$nextTick(() => {\r\n                   this.tableHeight =  document.body.clientHeight - 300\r\n                })\r\n            },\r\n            // 获取资金列表数据\r\n            getMoneyList(){\r\n                const para = Object.assign({},this.incomePayData,this.search);\r\n                getMoneyIncomePay(para).then(res => {\r\n                     this.loading = false;\r\n                     this.pageTotal = res.data.total\r\n                     this.tableData = res.data.moneyList\r\n                })\r\n            },\r\n            // 显示资金弹框\r\n            showAddFundDialog(val){\r\n                this.$store.commit('SET_DIALOG_TITLE', val)\r\n                this.addFundDialog.show = true;\r\n            },\r\n            hideAddFundDialog(){\r\n                this.addFundDialog.show = false;\r\n            },\r\n            // 上下分页\r\n            handleCurrentChange(val){\r\n                this.incomePayData.page = val;\r\n                this.getMoneyList()\r\n            },\r\n            // 每页显示多少条\r\n            handleSizeChange(val){\r\n                this.incomePayData.limit = val;\r\n                this.getMoneyList()\r\n            },\r\n            getPay(val){\r\n               if(mutils.isInteger(val)){\r\n                   return -val;\r\n               }else{\r\n                   return val;\r\n               }\r\n            },\r\n            /**\r\n            * 格式化状态\r\n            */\r\n            formatterType(item) {\r\n                const type = parseInt(item.incomePayType);\r\n                return this.format_type_list[type];\r\n            },\r\n            filterType(value, item) {\r\n                const type = parseInt(item.incomePayType);\r\n                return this.format_type_list[value] == this.format_type_list[type];\r\n            },\r\n            // 编辑操作方法\r\n            onEditMoney(row){\r\n                this.addFundDialog.dialogRow = {...row};\r\n                this.showAddFundDialog();\r\n            },\r\n            // 删除数据\r\n            onDeleteMoney(row){\r\n                this.$confirm('确认删除该记录吗?', '提示', {\r\n                    type: 'warning'\r\n                })\r\n                .then(() => {\r\n                    const para = { id: row.id }\r\n                    removeMoney(para).then(res => {\r\n                        this.$message({\r\n                            message: '删除成功',\r\n                            type: 'success'\r\n                        })\r\n                        this.getMoneyList()\r\n                    })\r\n                })\r\n                .catch(() => {})\r\n            },\r\n            onBatchDelMoney(){\r\n                this.$confirm('确认批量删除记录吗?', '提示', {\r\n                    type: 'warning'\r\n                })\r\n                .then(() => {\r\n                    const ids = this.rowIds.map(item => item.id).toString()\r\n                    const para = { ids: ids }\r\n                    batchremoveMoney(para).then(res => {\r\n                        this.$message({\r\n                            message: '批量删除成功',\r\n                            type: 'success'\r\n                        })\r\n                        this.getMoneyList()\r\n                    })\r\n                })\r\n                .catch(() => {})\r\n            },\r\n            // 当用户手动勾选数据行的 Checkbox 时触发的事件\r\n            selectTable(val, row){\r\n                this.setSearchBtn(val);\r\n            },\r\n            // 用户全选checkbox时触发该事件\r\n            selectAll(val){\r\n                 val.forEach((item) => {\r\n                     this.rowIds.push(item.id);\r\n                });\r\n                this.setSearchBtn(val);\r\n            },\r\n            setSearchBtn(val){\r\n                let isFlag = true;\r\n                if(val.length > 0){\r\n                    isFlag = false;\r\n                }else{\r\n                    isFlag = true;\r\n                }\r\n                this.$store.commit('SET_SEARCHBTN_DISABLED',isFlag);\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .table_container{\r\n        padding: 10px;\r\n        background: #fff;\r\n        border-radius: 2px;\r\n    }\r\n    .el-dialog--small{\r\n       width: 600px !important;\r\n    }\r\n    .pagination{\r\n        text-align: left;\r\n        margin-top: 10px;\r\n    }\r\n     \r\n</style>\r\n\r\n\r\n"],"sourceRoot":"src/page/fundList"}]}